<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Firebase OTP Demo</title>
</head>
<body>
  <h2>Phone OTP Verification</h2>

  <input type="text" id="phoneNumber" placeholder="+8801XXXXXXXXX">
  <div id="recaptcha-container"></div>
  <button onclick="sendOTP()">Send OTP</button>

  <br><br>
  <input type="text" id="otpInput" placeholder="Enter OTP">
  <button onclick="verifyOTP()">Verify OTP</button>

  <p id="status"></p>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-analytics.js"></script>

  <script>
    // ðŸ‘‰ à¦¤à§‹à¦®à¦¾à¦° Firebase config à¦¬à¦¸à¦¾à¦¨à§‹ à¦¹à¦²à§‹
    const firebaseConfig = {
      apiKey: "AIzaSyCbHPks7vfhqzH61h0QNT58MF_NaMQAfgk",
      authDomain: "authentication-83d40.firebaseapp.com",
      projectId: "authentication-83d40",
      storageBucket: "authentication-83d40.firebasestorage.app",
      messagingSenderId: "720025080360",
      appId: "1:720025080360:web:67638f35811f5462439b1d",
      measurementId: "G-6B5ZNVCFB3"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    // reCAPTCHA setup
    window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', {
      'size': 'invisible'
    });

    // OTP à¦ªà¦¾à¦ à¦¾à¦¨à§‹
    function sendOTP() {
      var phoneNumber = document.getElementById("phoneNumber").value;
      var appVerifier = window.recaptchaVerifier;
      auth.signInWithPhoneNumber(phoneNumber, appVerifier)
        .then(function (confirmationResult) {
          window.confirmationResult = confirmationResult;
          document.getElementById("status").innerText = "OTP Sent!";
        }).catch(function (error) {
          document.getElementById("status").innerText = "Error: " + error.message;
        });
    }

    // OTP verify
    function verifyOTP() {
      var code = document.getElementById("otpInput").value;
      window.confirmationResult.confirm(code).then(function (result) {
        var user = result.user;
        document.getElementById("status").innerText = "Login Success: " + user.phoneNumber;
      }).catch(function (error) {
        document.getElementById("status").innerText = "Invalid OTP!";
      });
    }
  </script>
</body>
</html>